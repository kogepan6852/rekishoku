<ion-view title="">
  <ion-content class="shops has-tabs-top" ng-init="init()" on-drag-up="onDragUpScroll()" on-drag-down="onDragDownScroll()" delegate-handle="shops">

    <ion-refresher
      pulling-text="{{'TEXT.PULLING'|translate}}"
      on-refresh="init()">
    </ion-refresher>

    <!-- Search condition -->
    <div class="row search-condition-bar" ng-if="keywords || period || person || category || province">
      <div class="col no-padding">
        <div class="search-condition">
          <div>
            <span ng-if="category" ng-bind="category | mapppingId:categories"></span>
            <span ng-if="keywords" ng-bind="keywords"></span>
            <span ng-if="period" ng-bind="period | mapppingId:periods"></span>
            <span ng-if="person" ng-bind="person | mapppingId:people"></span>
            <span ng-if="province" ng-bind="province"></span>
            <button class="button clear-button" ng-click="deleteSearchCondition()"><i class="icon ion-close"></i></button>
          </div>
        </div>
      </div>
    </div>

    <!-- Items -->
    <div>
      <list-item-shop
         ng-repeat="result in results"
         ng-click="moveToShopDetail(result.shop.id)"
         data="result.shop"
         categories="result.categories"
         periods="result.periods"
         people="result.people"
         price="result.price"
         rating="result.rating.average"
         window-type="windowType" >
       </list-item-shop>
    </div>

    <!-- Lazy loading -->
    <ion-infinite-scroll
      ng-if="!noMoreLoad"
      on-infinite="loadMoreData()"
      distance="150px">
    </ion-infinite-scroll>

  </ion-content>

  <!-- <ion-footer-bar class="search-footer" ng-class="{'hide-footer': hideFooter}"> -->
  <ion-footer-bar class="search-footer" ng-controller="TabsCtrl">
    <!-- <h1 class="title"><i class="ion-arrow-down-b"></i> SORT BY</h1> -->
    <div class="buttons" ng-click="moveToMap()">
      <button class="button mode-btn first-btn" ng-class="{'hide-btn': hideModeBtn}">
        <i class="ion-ios-flag-outline"></i>
        <span>MAP</span>
      </button>
    </div>
  </ion-footer-bar>

</ion-view>
