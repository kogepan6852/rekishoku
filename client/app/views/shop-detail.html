<ion-view title="" class="shop-detail-view">
  <ion-content has-header="true" class="detail store" ng-init="init()">

    <ion-refresher
      pulling-text="{{'TEXT.PULLING'|translate}}"
      on-refresh="init()">
    </ion-refresher>

    <!-- MAIN IMAGE -->
    <div class="row no-padding">
      <div class="top-image no-padding">
        <img ng-src="{{shop.image.url}}" src="../images/dummy-img.png" class="hidden-xs">
        <img ng-src="{{shop.image.md.url}}" src="../images/dummy-img.png" class="visible-xs">
      </div>
    </div>
    <div class="row no-padding no-margin" ng-if="shop.image_quotation_name">
      <div class="image-quotation">
        <span ng-bind="'POST.PHOTO_BY'|translate"></span>
        <a href="{{shop.image_quotation_url}}" target="_blank">{{shop.image_quotation_name}}</a>
      </div>
    </div>

    <!-- MAIN INFORMATION -->
    <div class="row row-bottom">
      <div class="col-xs-12 col-sm-12 col-md-12 col-lg-8 col-lg-offset-2">
        <div class="information">
          <div class="name">
            <h4>STORE</h4>
            <h1 ng-bind="shop.name" class="mincho"></h1>
          </div>
          <div class="tags">
            <info-tag name="{{period.name}}" ng-repeat="period in periods"></info-tag>
            <info-tag name="{{person.name}}" ng-repeat="person in people"></info-tag>
          </div>
          <div class="tel">
            <h2>TEL <span ng-bind="shop.phone_no"></span></h2>
          </div>
          <div class="other">
            <p>
              <span ng-bind="shop.province"></span>„ÄÅ
              <span ng-if="categories" category-list data="categories" ></span>
              <br>
              <span ng-bind="'SHOP.DAYTIME'|translate"></span>
              <span class="price" ng-bind="price.daytime"></span>
              <span ng-bind="'SHOP.NIGHTTIME'|translate"></span>
              <span class="price" ng-bind="price.nighttime"></span>
            </p>
            <star label="true" count="rating.average"></star>
          </div>
        </div>
      </div>
    </div>

    <hr>

    <!-- DESCRIPTION -->
    <div class="row padding-top padding-bottom">
      <div class="col-xs-12 col-sm-12 col-md-12 col-lg-8 col-lg-offset-2">
        <div class="description"><p ng-bind-html="shop.description | newlines"></p></div>
      </div>
    </div>

    <!-- SUB IMAGE -->
    <div class="row no-padding">
      <div class="top-image">
        <img ng-src="{{shop.subimage.url}}" src="../images/dummy-img.png" class="hidden-xs">
        <img ng-src="{{shop.subimage.md.url}}" src="../images/dummy-img.png" class="visible-xs">
      </div>
    </div>
    <div class="row no-padding no-margin" ng-if="shop.image_quotation_name">
      <div class="image-quotation">
        <span ng-bind="'POST.PHOTO_BY'|translate"></span>
        <a href="{{shop.image_quotation_url}}" target="_blank">{{shop.image_quotation_name}}</a>
      </div>
    </div>

    <!-- MENU -->
    <div class="row padding-bottom">
      <div class="col-xs-12 col-sm-12 col-md-12 col-lg-8 col-lg-offset-2 sub-info">
        <div class="menu-list">
          <div class="info-title"><span ng-bind="'SHOP.MENU'|translate"></span></div>
          <div ng-bind-html="shop.menu | newlines"></div>
        </div>
      </div>
    </div>

    <!-- ADVERTISEMENT -->
    <advertisment-row seed="0"></advertisment-row>

    <!-- SUB INFORMAION -->
    <div class="row padding-top padding-bottom">
      <div class="col-xs-12 col-sm-12 col-md-12 col-lg-8 col-lg-offset-2">
        <div class="sub-info">

          <!-- STORE ADDRESS -->
          <div ng-show="shop.province">
            <div class="info-title">
              <a target="_blank" href="http://maps.google.co.jp/maps?t=m&z=16&q={{shop.province + shop.city + shop.address1}}">
                <span ng-bind="'SHOP.ADDRESS'|translate"></span>
                <i class="ion-arrow-right-b"></i>
              </a>
            </div>
            <div>
              <a target="_blank" href="http://maps.google.co.jp/maps?t=m&z=16&q={{shop.province + shop.city + shop.address1}}"
                ng-bind="shop.province + shop.city + shop.address1 + shop.address2"></a>
            </div>
          </div>
          <!-- PHONE NO -->
          <div ng-show="shop.phone_no">
            <div class="info-title">
              <a href="tel:{{shop.phone_no | delHyphen}}">
                <span ng-bind="'SHOP.PHONE_NO'|translate"></span>
                <i class="ion-arrow-right-b"></i>
              </a>
            </div>
            <div><a href="tel:{{shop.phone_no | delHyphen}}" ng-bind="shop.phone_no"></a></div>
          </div>
          <!-- WEB URL -->
          <div ng-show="shop.url">
            <div class="info-title">
              <a target="_blank" href="{{shop.url}}">
                <span ng-bind="'SHOP.WEB'|translate"></span>
                <i class="ion-arrow-right-b"></i>
              </a>
            </div>
            <div class="url"><a target="_blank" href="{{shop.url}}" ng-bind="shop.url"></a></div>
          </div>
          <!-- Business time -->
          <div>
            <div class="info-title">
              <span ng-bind="'SHOP.TIME'|translate"></span>
            </div>
            <div ng-bind-html="shop.shop_hours | newlines"></div>
          </div>

        </div>
      </div>
    </div>

    <!-- MAP -->
    <div class="row padding-bottom">
      <div class="col-xs-12 col-sm-12 col-md-12 col-lg-8 col-lg-offset-2">
        <div class="detail-map" ng-if="shop.province">
          <ui-gmap-google-map center="map.center" zoom="map.zoom" draggable="true" options="options" bounds="map.bounds">
              <ui-gmap-markers models="targetMarkers" coords="'self'" icon="'icon'">
              </ui-gmap-markers>
          </ui-gmap-google-map>
        </div>
      </div>
    </div>

    <!-- SNS ICONS -->
    <sns-icons
      image-url="eyeCatchImage.image.url"
      title="shop.name"
      description="shop.description" >
    </sns-icons>

    <hr ng-if="posts.length!=0">

    <!-- POSTS -->
    <div class="row padding-top" ng-if="posts.length!=0">
      <div class="col-xs-12 col-sm-12 col-md-12 col-lg-8 col-lg-offset-2">
        <h2>{{'POST.EPISODE'|translate}}</h2>
      </div>
    </div>

    <div class="row padding-bottom" ng-if="posts.length!=0">
      <div class="col-xs-12 col-sm-12 col-md-12 col-lg-8 col-lg-offset-2 no-padding">
        <!-- Items -->
        <list-item-post
           ng-repeat="post in posts"
           ng-click="moveToPostDetail(post.post.id)"
           data="post.post"
           periods="post.periods"
           people="post.people"
           category="post.post.category_name" >
         </list-item-post>
      </div>
    </div>

    <!-- ADVERTISEMENT -->
    <advertisment-row seed="1"></advertisment-row>

  </ion-content>
</ion-view>
